<!DOCTYPE html>
<html lang="ru" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AutoTrack Журнал поездок</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#2563eb">
  <link rel="stylesheet" href="css/app.css">
</head>
<body>
  <header class="account-panel hidden" id="accountPanel">
    <button type="button" id="accountMenuButton" class="secondary account-menu-button"></button>
    <div class="account-menu hidden" id="accountMenu">
      <button type="button" id="accountLogoutButton" class="secondary">Выйти из аккаунта</button>
    </div>
  </header>
  <main class="page">
    <section class="card auth-card" id="authCard">
      <div class="card-header">
        <div>
          <h1>Журнал поездок</h1>
          <p id="authStatus">Выполните вход</p>
        </div>
        <div class="row">
          <button type="button" id="installAppButtonAuth" class="secondary hidden">Установить приложение</button>
          <button type="button" id="themeToggleButton" class="secondary">Сменить тему</button>
        </div>
      </div>
      <button type="button" id="guestLoginButton" class="primary-action">Войти как гость</button>
      <form id="emailAuthForm" class="stack">
        <label class="field">
          <span>Email</span>
          <input type="email" id="emailInput" required>
        </label>
        <label class="field">
          <span>Пароль</span>
          <input type="password" id="passwordInput" required>
        </label>
        <div class="row auth-secondary-actions">
          <button type="submit" class="secondary">Войти по email</button>
          <button type="button" id="registerButton" class="secondary">Регистрация</button>
        </div>
      </form>
    </section>

    <section class="card hidden" id="managerCard">
      <h2>Управление доступом и машинами</h2>
      <p id="managerStatus" class="status"></p>
      <label class="field" id="responsibleField">
        <span>Email ответственных</span>
        <div class="tag-editor">
          <div class="tag-list" id="managerEmailList"></div>
          <input type="email" id="managerEmailInput" placeholder="Введите email и нажмите Enter">
        </div>
      </label>
      <label class="field" id="assistantField">
        <span>Email помощников</span>
        <div class="tag-editor">
          <div class="tag-list" id="assistantEmailList"></div>
          <input type="email" id="assistantEmailInput" placeholder="Введите email и нажмите Enter">
        </div>
      </label>
      <label class="field">
        <span>Список машин</span>
        <div class="tag-editor">
          <div class="tag-list" id="vehicleNumberList"></div>
          <input type="text" id="vehicleNumberManagerInput" placeholder="Введите номер и нажмите Enter">
        </div>
      </label>
      <button type="button" id="saveManagerButton">Сохранить настройки</button>
    </section>

    <section class="card hidden" id="tripCard">
      <h2>Форма поездки</h2>
      <form id="tripForm" class="stack">
        <label class="field">
          <span>ФИО</span>
          <input type="text" id="driverFullNameInput" required>
        </label>
        <label class="field">
          <span>Дата поездки</span>
          <input type="date" id="tripDateInput" required>
        </label>
        <label class="field">
          <span>Поиск номера машины</span>
          <input type="text" id="vehicleNumberSearchInput" placeholder="Введите часть номера">
        </label>
        <label class="field">
          <span>Номер машины</span>
          <select id="vehicleNumberInput" required></select>
        </label>
        <label class="field">
          <span>Пробег</span>
          <input type="number" id="mileageInput" min="0" step="1" required>
        </label>
        <label class="field">
          <span>Одометр</span>
          <input type="number" id="odometerInput" min="0" step="1" required>
        </label>
        <label class="field">
          <span>Текст поездки</span>
          <textarea id="tripDescriptionInput" rows="4" required></textarea>
        </label>
        <button type="submit">Отправить запись</button>
      </form>
      <p id="tripFormStatus" class="status"></p>
    </section>

    <section class="card hidden" id="journalCard">
      <h2>Журнал поездок</h2>
      <div class="stack">
        <div class="row">
          <label class="field compact">
            <span>Дата от</span>
            <input type="date" id="dateFromInput">
          </label>
          <label class="field compact">
            <span>Дата до</span>
            <input type="date" id="dateToInput">
          </label>
          <label class="field">
            <span>Сортировка</span>
            <select id="sortOrderInput">
              <option value="tripDateDesc">Дата поездки: новые сверху</option>
              <option value="tripDateAsc">Дата поездки: старые сверху</option>
              <option value="createdAtDesc">Дата создания: новые сверху</option>
              <option value="createdAtAsc">Дата создания: старые сверху</option>
              <option value="vehicleNumberDigitsAsc">Номер машины: по трём цифрам по возрастанию</option>
              <option value="vehicleNumberDigitsDesc">Номер машины: по трём цифрам по убыванию</option>
              <option value="mileageDesc">Пробег: по убыванию</option>
              <option value="mileageAsc">Пробег: по возрастанию</option>
              <option value="odometerDesc">Одометр: по убыванию</option>
              <option value="odometerAsc">Одометр: по возрастанию</option>
            </select>
          </label>
        </div>
        <div class="row">
          <button type="button" id="applyFilterButton">Применить</button>
          <button type="button" id="resetFilterButton" class="secondary">Сбросить</button>
          <button type="button" id="exportAllButton" class="secondary">Скачать</button>
          <button type="button" id="installAppButton" class="secondary hidden">Скачать приложение</button>
        </div>
      </div>
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>ФИО</th>
              <th>Дата поездки</th>
              <th>Номер машины</th>
              <th>Пробег</th>
              <th>Одометр</th>
              <th>Текст поездки</th>
              <th>Дата создания</th>
              <th>Суточный пробег</th>
              <th>Одометр на конец дня</th>
            </tr>
          </thead>
          <tbody id="journalTableBody"></tbody>
        </table>
      </div>
      <p id="journalStatus" class="status"></p>
    </section>
  </main>

  <script type="module" src="js/app.js"></script>
</body>
</html>
